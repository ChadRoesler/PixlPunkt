<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="PixlPunkt.UI.Animation.PlaybackPanel"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ic="using:FluentIcons.WinUI">

    <Grid Background="{ThemeResource CardBackgroundFillColorDefaultBrush}">
        <Grid.RowDefinitions>
            <!-- Header -->
            <RowDefinition Height="Auto"/>
            <!-- Preview area -->
            <RowDefinition Height="*"/>
            <!-- Transport controls -->
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" 
                Padding="8,6"
                Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="0,0,0,1">
            <TextBlock Text="Playback" 
                       FontWeight="SemiBold"
                       FontSize="12"/>
        </Border>

        <!-- Preview -->
        <Border x:Name="PreviewBorder"
                Grid.Row="1"
                Margin="8"
                Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="4">
            <!-- CanvasControl will be inserted here programmatically -->
        </Border>

        <!-- Transport Controls -->
        <Border Grid.Row="2"
                Padding="8,6"
                Background="{ThemeResource SolidBackgroundFillColorBaseBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="0,1,0,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Main controls -->
                <StackPanel Grid.Row="0" 
                            Orientation="Horizontal" 
                            HorizontalAlignment="Center"
                            Spacing="4">
                    <!-- Play/Pause -->
                    <Button x:Name="PlayPauseButton"
                            Click="PlayPauseButton_Click"
                            Padding="8,4"
                            ToolTipService.ToolTip="Play/Pause">
                        <ic:FluentIcon x:Name="PlayPauseIcon" Icon="Play" FontSize="16"/>
                    </Button>

                    <!-- Stop -->
                    <Button x:Name="StopButton"
                            Click="StopButton_Click"
                            Padding="8,4"
                            ToolTipService.ToolTip="Stop">
                        <ic:FluentIcon Icon="Stop" FontSize="16"/>
                    </Button>

                    <Border Width="1" Background="{ThemeResource DividerStrokeColorDefaultBrush}" Margin="4,2"/>

                    <!-- Step back -->
                    <Button x:Name="StepBackButton"
                            Click="StepBackButton_Click"
                            Padding="4"
                            ToolTipService.ToolTip="Previous frame">
                        <ic:FluentIcon Icon="ChevronLeft" FontSize="14"/>
                    </Button>

                    <!-- Step forward -->
                    <Button x:Name="StepForwardButton"
                            Click="StepForwardButton_Click"
                            Padding="4"
                            ToolTipService.ToolTip="Next frame">
                        <ic:FluentIcon Icon="ChevronRight" FontSize="14"/>
                    </Button>

                    <Border Width="1" Background="{ThemeResource DividerStrokeColorDefaultBrush}" Margin="4,2"/>

                    <!-- Loop toggle -->
                    <ToggleButton x:Name="LoopToggle"
                                  Click="LoopToggle_Click"
                                  Padding="4"
                                  ToolTipService.ToolTip="Toggle loop">
                        <ic:FluentIcon Icon="ArrowRepeatAll" FontSize="14"/>
                    </ToggleButton>
                </StackPanel>

                <!-- Frame info -->
                <StackPanel Grid.Row="1" 
                            Orientation="Horizontal" 
                            HorizontalAlignment="Center"
                            Margin="0,4,0,0"
                            Spacing="8">
                    <TextBlock x:Name="FrameInfoText"
                               Text="Frame 1/4"
                               FontSize="11"
                               Opacity="0.7"/>
                    <TextBlock x:Name="TimeInfoText"
                               Text="0.0s / 0.4s"
                               FontSize="11"
                               Opacity="0.7"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>

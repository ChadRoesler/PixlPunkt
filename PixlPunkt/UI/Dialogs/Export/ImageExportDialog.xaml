<ContentDialog
    x:Class="PixlPunkt.UI.Dialogs.Export.ImageExportDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Export Image"
    PrimaryButtonText="Export"
    CloseButtonText="Cancel"
    DefaultButton="Primary">

    <StackPanel Spacing="12" Padding="4">

        <!-- Export Settings Row 1: Scale and Format -->
        <StackPanel Orientation="Horizontal" Spacing="12">
            <TextBlock Text="Pixel scale:" VerticalAlignment="Center" />
            <NumberBox x:Name="ScaleNumberBox"
                       Width="100"
                       Minimum="1"
                       Maximum="16"
                       Value="1"
                       SpinButtonPlacementMode="Inline"
                       ValueChanged="ScaleNumberBox_ValueChanged" />

            <TextBlock Text="Format:" VerticalAlignment="Center" Margin="16,0,0,0" />
            <ComboBox x:Name="FormatComboBox"
                      Width="160"
                      SelectionChanged="FormatComboBox_SelectionChanged" />
        </StackPanel>

        <!-- Export Settings Row 2: Options -->
        <CheckBox x:Name="SeparateLayersCheckBox"
                  Content="Layers as separate files" />

        <!-- Background Color Selection (for BMP/JPEG) -->
        <StackPanel x:Name="BackgroundColorPanel"
                    Orientation="Horizontal" 
                    Spacing="8"
                    Visibility="Collapsed">
            <TextBlock Text="Background Color:" VerticalAlignment="Center" />
            <Button x:Name="BackgroundColorButton"
                    Padding="4"
                    Click="BackgroundColorButton_Click">
                <Border x:Name="BackgroundColorSwatch"
                        Width="28"
                        Height="18"
                        Background="White"
                        BorderBrush="Gray"
                        BorderThickness="1"
                        CornerRadius="3" />
            </Button>
        </StackPanel>

        <!-- Preview Section -->
        <StackPanel Spacing="8" Margin="0,8,0,0">
            <TextBlock Text="Preview" FontWeight="SemiBold" />
            <Border x:Name="PreviewBorder"
                    BorderBrush="Gray"
                    BorderThickness="1"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    MaxWidth="320"
                    MaxHeight="240"
                    HorizontalAlignment="Left">
                <Grid>
                    <!-- Checkerboard background for transparency -->
                    <Border x:Name="CheckerboardBackground" />

                    <!-- Preview image -->
                    <Image x:Name="PreviewImage"
                           Stretch="Uniform" />
                </Grid>
            </Border>
            <TextBlock x:Name="PreviewInfoText"
                       FontSize="11"
                       Opacity="0.7" />
        </StackPanel>

    </StackPanel>
</ContentDialog>
